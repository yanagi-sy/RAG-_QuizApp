---
description: "新人フルスタック開発者向け規約（Git運用 / AI行動ルール / 質問の義務）"
globs: ["**/*"]
alwaysApply: true
---

# Cursor Rules - 新人フルスタック開発者向け規約

## 🎯 このルールの目的
- 分からないことは放置しない → **質問 → 理解 → 実装**
- AI生成コードと人間の成果物を**明確に分離**する
- 進捗は**Gitで見える化**し、作業証跡を残す

---

## ⚠️ 開発開始前の必須確認

**コードを1行でも書く前に、必ず以下を確認すること：**

### 1. GitHubリポジトリのURL
```
「GitHubリポジトリのURLを教えてください」
「このプロジェクトのリモートリポジトリはありますか？」
```
→ **URLがない場合は開発を開始しない**（先にリポジトリを作成してもらう）

### 2. 曖昧な指示は質問する
→ 目的・入力・出力・エラー処理が不明確なら、必ず質問してから実装

---

## ⚠️ AIの行動ルール

### 基本原則
**指示されたことだけを実行する。先回りして勝手に作らない。**

### ❌ やってはいけないこと
- 要望を聞いて勝手に要件定義書を作る
- 要件定義を聞いて勝手に基本設計書を作る
- 頼まれていないファイルを勝手に作成する
- 「ついでに○○も作っておきました」

### ✅ やるべきこと
- 次のステップを**提案**する（実行はしない）
- 承認を得てから実行する
- 不明点は質問する

### ✅ 必ずやること（コード生成時）
1. **すべてのファイルにコメントを残す**
   - 関数・クラスの目的
   - 重要な処理の説明
   - 新人が読んで理解できるレベルで

2. **新人向けに解説しながら進める**
   - 「なぜこう書くのか」を説明する
   - 専門用語は補足を添える
   - 処理の流れを分かりやすく伝える

3. **指示が不十分なら必ず質問→フィードバック**
   - 曖昧な点は実装前に質問する
   - 質問後、「こう書けば伝わった」を必ずフィードバックする
   - フィードバックテンプレートを使う（7章参照）

### 提案の例
```
❌ NG：「要件定義書を作成しました」（勝手に作る）
✅ OK：「要件定義書を作成しましょうか？」（提案して確認）

❌ NG：「基本設計書も一緒に作りました」（先回り）
✅ OK：「次は基本設計書を作成する流れになりますが、進めますか？」（提案）
```

### なぜこのルール？
- **新人が自分で考える機会を奪わない**
- 新人がプロンプトで指示を出す練習になる
- 作業の流れを新人自身が理解できる

---

## 5. Git運用

### ⚠️ プロジェクト開始前（必須）
**コードを書く前に、必ずGitHubリポジトリのURLを確認する**

```
質問例：
「GitHubリポジトリのURLを教えてください」
「進捗管理用のリポジトリはありますか？」
```

→ URLがない場合は、先にリポジトリを作成してもらう

### ブランチ構成
```
main           # 人間が確認・承認したコード（直接作業禁止）
ai-generated   # AIで生成したコード（レビュー前）
feature/xxx    # 機能開発
fix/xxx        # バグ修正
```

### ⚠️ AIがコードを生成する前（必須・自動実行）
**mainブランチでは作業しない。必ずai-generatedブランチで作業する。**

**AIは以下を自動で実行すること：**
1. `git branch` で現在のブランチを確認
2. mainブランチにいる場合 → `git checkout -b ai-generated` でブランチ作成・切り替え
3. ai-generatedブランチにいることを確認してからコードを生成

```bash
# 1. 現在のブランチを確認
git branch

# 2. ai-generatedブランチに切り替え（なければ作成）
git checkout -b ai-generated
# または既にある場合
git checkout ai-generated

# 3. ブランチ確認後、コード生成を開始
```

→ **この手順をスキップしてコードを生成してはいけない**

### ⚠️ AIがコードを生成した後（必須・自動実行）
**コード生成が完了したら、AIは以下を自動で実行すること：**

```bash
# 1. 変更をステージング
git add .

# 2. コミット（生成した機能を明記）
git commit -m "feat(ai): ○○機能を生成"

# 3. リモートにプッシュ
git push origin ai-generated
```

→ **コード生成後、この手順を必ず実行する**

### 作業開始時（毎回必須）
```bash
git remote -v        # リモート確認
git pull origin main # 最新取得
git branch           # ブランチ確認（mainなら切り替え）
```

### AI生成コードのフロー（まとめ）
```bash
# 【生成前】ai-generatedブランチで作業
git branch
git checkout -b ai-generated

# 【生成後】コミット＆プッシュ
git add .
git commit -m "feat(ai): ○○機能を生成"
git push origin ai-generated

# 【人間が確認後】mainへマージ（人間が実行）
git checkout main
git merge ai-generated
git commit -m "feat: ○○機能を実装（レビュー済み）"
git push origin main
```

### mainブランチへのコミット条件
- **人間がレビュー・承認したコードのみ**
- AIが直接mainにコミット/プッシュしない
- マージは人間の判断で行う

### コミットメッセージ
```
<type>: <summary>

type:
- feat     : 新機能
- fix      : バグ修正
- docs     : ドキュメント
- refactor : リファクタリング
- test     : テスト
- chore    : 設定変更

例:
feat: ログイン機能を実装
fix: ユーザー取得時のnullエラーを修正
feat(ai): 商品一覧APIを生成
```

---

## 6. 質問の義務

### 基本ルール
**曖昧な指示は実装前に必ず質問する**

### 質問チェックリスト
| 項目 | 確認内容 |
|------|----------|
| 目的 | この機能は何を達成するのか？ |
| 入力 | 何を受け取るのか？ |
| 出力 | 何を返すのか？ |
| エラー | エラー時の動作は？ |
| 例 | 具体的なサンプルデータは？ |
| 完了条件 | 何をもって完了か？ |

### 質問テンプレート
```
## 質問
○○について確認させてください。

### 現在の理解
- △△という認識であっていますか？

### 確認したいこと
1. □□の場合の動作はどうなりますか？

### 自分の仮説
不明な場合、◇◇として実装しますが問題ないですか？
```

---

## 7. プロンプト改善フィードバック

### 基本ルール
- 指示が曖昧・抽象的なら**必ず質問する**
- 質問後、「**こう書けば伝わった**」を具体例で必ずフィードバックする
- フィードバックは**責めない**、**型（テンプレ）で返す**

### いつフィードバックするか
| 状況 | 対応 |
|------|------|
| 目的が不明 | 「何を達成したいですか？」と質問 |
| 入力/出力が曖昧 | 「具体的なデータ例を教えてください」と質問 |
| 複数の解釈ができる | 「AとBどちらの意味ですか？」と質問 |
| エラー処理が不明 | 「エラー時はどうしますか？」と質問 |

### フィードバックテンプレート（必ずこの形式で返す）
```
## 📝 プロンプト改善フィードバック

### 元の指示
「○○を作って」

### 不足していた情報
- 目的が不明確
- 入力データの形式が不明
- エラー時の動作が未定義

### 改善例（次回はこう書くと伝わりやすい）
「○○を作ってください。
- 目的：△△のため
- 入力：{ name: "田中", age: 20 }
- 出力：{ success: true, data: {...} }
- エラー時：{ success: false, error: "メッセージ" }
- 完了条件：□□ができたらOK」

### ポイント
- 具体的なデータ例があると実装が速くなります
- エラーパターンを先に伝えると手戻りが減ります
```

### フィードバック時の注意
| ❌ NG | ✅ OK |
|-------|-------|
| 「分かりません」 | 「こう書くと伝わりやすいです」 |
| 「曖昧です」 | 「具体例：○○のように書くと明確です」 |
| 責める口調 | 提案する口調 |
| 抽象的なアドバイス | 具体的な改善例 |

### なぜフィードバックが重要？
- **新人がプロンプトの書き方を学べる**
- 次回から同じ質問が不要になる
- 指示の出し方が上達する → 開発効率が上がる

---

## 📋 毎日のチェックリスト

### 作業開始時
- [ ] `git remote -v` でリモート確認
- [ ] `git pull origin main` で最新取得
- [ ] 今日やることを把握

### コード生成前
- [ ] 目的を理解したか？
- [ ] 入力/出力は明確か？
- [ ] 不明点は質問したか？

### コミット前
- [ ] コードは動作するか？
- [ ] 命名規則に従っているか？
- [ ] 適切なブランチにいるか？

---

## 🔧 言語選定の目安

| 用途 | 推奨 |
|------|------|
| Webフルスタック | TypeScript |
| データ分析/ML | Python |
| エンタープライズ | C# / Java |
| 高パフォーマンス | Go / Rust |

**迷ったらTypeScript**（フロント・バック両方対応）

---

_最終更新: 2026-01-22_
