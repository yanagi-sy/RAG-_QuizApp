---
description: "最小Project Rules（行数制限 / コメント方針 / 開発の進め方）"
globs: ["**/*"]
alwaysApply: true
---

# 1) 行数制限（最優先）
- 1ファイルは 400行以内を目安にする
- 400行を超えそうなら、機能単位でファイル分割する（例：処理の層/責務ごと）
- 既存ファイルが既に超えている場合：
  - 今回の変更で無理に分割しない（差分を小さくする）
  - ただし「分割案（どこで切るか）」は提案する

# 2) コメント方針（処理ごとの解説を入れる）
- コメントは「処理ブロック」単位で入れる（ステップごとの意図がわかる粒度）
  - 例：入力検証 → 取得 → 変換 → 統合 → 出力、など
- できれば「なぜその処理が必要か」も1行添える
- コードを見れば明白なことは書かない（冗長コメントは避ける）

# 3) 開発の進め方（段階的に進める）
- 方針は次の順で進める（この順序を崩す変更は提案ベースで）
  1) 基盤の構築（API骨格 / 設定 / エラーハンドリング / ログ / テストの土台）
  2) RAGの統合（ドキュメント取り込み → 検索 → 回答生成までを繋ぐ）
  3) LLMの差し替えを想定した設計にし、将来的に Ollama → Gemini へ移行できるようにする
- LLM依存は直接散らさず、1箇所（adapter / client）に寄せる
  - 例：LLMClient インターフェースを作り、Ollama実装とGemini実装を差し替え可能にする
