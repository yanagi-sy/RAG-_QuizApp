# RAG理解度テスト - 問題011

## 問題情報
- **問題番号**: 011
- **カテゴリ**: EmbeddingとベクトルDB
- **難易度**: 中級
- **作成日時**: 2026-01-26 13:03:58

## 問題文

**Q11. ベクトル類似度（コサイン類似度）とは何ですか？どのように計算されますか？このアプリでは、ChromaDBを使ってどのようにベクトル検索を実現していますか？**

---

## 回答欄

（ここに回答を記入してください）
ベクトル類似値とは、ベクトル化したデータをベクトルDBの空間に落とし込んだ際の座標の類似度のこと。
このアプリでは384次元の空間に落とし込み類似値を測っている。
---

## 評価欄

### 理解度評価
- [x] レベル1（基礎）: 用語を説明できる、基本的な流れを理解している
- [ ] レベル2（応用）: 技術の仕組みを説明できる、手法の違いを理解している
- [ ] レベル3（実践）: 実装の詳細を説明できる、精度向上の方法を提案できる

### 評価コメント
**良い点：**
- ベクトル類似度の基本的な概念（座標の類似度）を理解している
- 384次元の空間に落とし込むことを認識している

**改善点：**
- **コサイン類似度の計算式が不足**。コサイン類似度は：
  ```
  cosine_similarity = (A · B) / (||A|| × ||B||)
  ```
  - AとBはベクトル、`·`は内積、`|| ||`はベクトルの大きさ（ノルム）
  - 値は-1〜1の範囲で、1に近いほど類似している
- **なぜコサイン類似度を使うのか**：
  - ベクトルの大きさに依存せず、方向の類似度を測れる
  - Embeddingは通常正規化されているため、コサイン類似度が適している
- **ChromaDBでの実装**：`app/rag/vectorstore.py`で、ChromaDBの`query`メソッドを使用。ChromaDBは内部的にコサイン類似度で検索を実行する

### 不足している知識
- コサイン類似度の計算式
- なぜコサイン類似度を使うのか（ベクトルの大きさに依存しないため）
- ChromaDBでの具体的な実装方法

### 改善点
- コサイン類似度の計算式を説明できるとレベル2に到達
- ChromaDBの実装詳細や、他の類似度指標（ユークリッド距離など）との違いを説明できるとレベル3

---

## 参考情報

このアプリの実装を確認する場合:
- `backend/app/rag/vectorstore.py` でベクトル検索の実装を確認
- ChromaDBのドキュメントを参照
